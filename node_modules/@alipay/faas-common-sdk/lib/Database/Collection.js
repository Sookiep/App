"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Collection=void 0;const faas_db_builder_1=require("@alipay/faas-db-builder"),utils_1=require("../utils"),Aggregate_1=require("./Aggregate"),Document_1=require("./Document"),Query_1=require("./Query");class Collection{#e;#t;builder;constructor(e,t){this.#t=e,this.#e=t,this.builder=new faas_db_builder_1.CollectionBuilder(e)}async add(e){const{options:t}=this.builder.add(e),r="POST",i=this.#r(e.data._id),s=await this.#e.httpclient.request({method:r,path:i,data:t});return utils_1.ResponseUtil.handleResponse(s)}doc(e){return new Document_1.Document(this.#t,e,this.#e)}limit(e){return new Query_1.Query(this.#t,this.#e).limit(e)}skip(e){return new Query_1.Query(this.#t,this.#e).skip(e)}where(e){return new Query_1.Query(this.#t,this.#e).where(e)}projection(e){return new Query_1.Query(this.#t,this.#e).projection(e)}field(e){return new Query_1.Query(this.#t,this.#e).field(e)}orderBy(e,t){return new Query_1.Query(this.#t,this.#e).orderBy(e,t)}aggregate(){return new Aggregate_1.Aggregate(this.#t,this.#e)}async get(){return await new Query_1.Query(this.#t,this.#e).get()}async count(){return await new Query_1.Query(this.#t,this.#e).count()}#r(e){return`/${this.#e.databaseName||"faas"}/${this.#t}?_id=${e||""}`}}exports.Collection=Collection;