"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Aggregate=void 0;const faas_db_builder_1=require("@alipay/faas-db-builder"),utils_1=require("../utils");class Aggregate{#e;#s;#t;constructor(t,e){this.#s=t,this.#e=e,this.#t=new faas_db_builder_1.AggregateBuilder(t)}match(t){return this.#t.match(t),this}group(t){return this.#t.group(t),this}sample(t){return this.#t.sample(t),this}lookup(t){return this.#t.lookup(t),this}async end(){const{options:t}=this.#t.end(),e="POST",s=`${this.#r()}?aggregate`,r=await this.#e.httpclient.request({method:e,path:s,data:t});return utils_1.ResponseUtil.handleResponse(r)}#r(){return`/${this.#e.databaseName||"faas"}/${this.#s}`}}exports.Aggregate=Aggregate;