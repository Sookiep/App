"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.QueryRequest=void 0;const AbstractCommand_1=require("./AbstractCommand"),error_1=require("../common/error"),util_1=require("./util");class QueryRequest{query;prefix;constructor(t,r=""){this.query=t,this.prefix=r}stringify(){const t={},r=util_1.CommandUtils.unchain(this.query),e=typeof r;if(r instanceof AbstractCommand_1.QueryCommand)return r.stringify();if(Array.isArray(r))return r.map((i,s)=>new QueryRequest(i,`${this.prefix}.$.${s}`).stringify());if(e==="number")return r;if(e==="boolean")return r;if(e==="string")return r;if(e==="bigint")return r;if(e==="function")throw error_1.DbBuildError.invalidParam(this.prefix,"\u4E0D\u652F\u6301\u51FD\u6570");if(e==="symbol")throw error_1.DbBuildError.invalidParam(this.prefix,"\u4E0D\u652F\u6301 symbol");if(e==="undefined")throw error_1.DbBuildError.invalidParam(this.prefix,"\u4E0D\u652F\u6301 undefined");if(r===null)return r;for(const i in r){const s=this.prefix?`${this.prefix}.${i}`:i,n=r[i],o=new QueryRequest(n,s);t[i]=o.stringify()}return t}toJSON(){return this.stringify()}}exports.QueryRequest=QueryRequest;